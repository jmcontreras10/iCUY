(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{23:function(e,a){e.exports="data:image/png;base64,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"},25:function(e,a,t){e.exports=t.p+"static/media/icuymaslogo.4e9241e7.png"},47:function(e,a,t){e.exports=t.p+"static/media/cuy.bc9a0821.svg"},48:function(e,a,t){e.exports=t.p+"static/media/goal.3cb17949.svg"},50:function(e,a,t){e.exports=t.p+"static/media/Salud.cc36a64d.svg"},51:function(e,a,t){e.exports=t.p+"static/media/Relaciones.c283c251.svg"},52:function(e,a,t){e.exports=t.p+"static/media/Trabajo.766eff40.svg"},55:function(e,a,t){e.exports=t.p+"static/media/libreta.2b657359.png"},66:function(e,a,t){e.exports=t(86)},78:function(e,a,t){},86:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(10),c=t.n(l),s=t(34),i=t.n(s),o=t(46),m=t(2),u=t(22),d=t(14),p=t(11),E=(t(78),t(35));var h=function(){var e=Object(n.useState)(!0),a=Object(m.a)(e,2),t=a[0],l=a[1];return t?r.a.createElement("div",{className:"wrapper vh-100 Login"},r.a.createElement("div",{className:"box"},r.a.createElement("p",{className:"title"},"Iniciar Sesi\xf3n"),r.a.createElement("form",{action:"/auth/login",method:"post"},r.a.createElement("div",{className:"inputBox"},r.a.createElement("input",{type:"email",name:"username",required:!0}),r.a.createElement("label",null,"Email")),r.a.createElement("div",{className:"inputBox"},r.a.createElement("input",{type:"password",name:"password",required:!0}),r.a.createElement("label",null,"Contrase\xf1a")),r.a.createElement("button",{className:"btn btn-primary centrado-h submit",type:"submit"},"Ingresar"),r.a.createElement("button",{onClick:function(){return window.location.href="/auth/google"},className:"btn btn-light centrado-h google"},r.a.createElement(E.a,null)," Ingresa con Google")),r.a.createElement("div",{className:"text-light"},"\xbfNo tienes una cuenta?",r.a.createElement("button",{className:"btn btn-link btn-secondary",onClick:function(){return l(!1)}},"Registrate")))):r.a.createElement("div",{className:"wrapper vh-100 Login"},r.a.createElement("div",{className:"box"},r.a.createElement("p",{className:"title"},"Registrarse"),r.a.createElement("form",{action:"/users",method:"post"},r.a.createElement("div",{className:"inputBox"},r.a.createElement("input",{type:"text",name:"name",required:!0}),r.a.createElement("label",null,"Nombre")),r.a.createElement("div",{className:"inputBox"},r.a.createElement("input",{type:"email",name:"email",required:!0}),r.a.createElement("label",null,"Email")),r.a.createElement("div",{className:"inputBox"},r.a.createElement("input",{type:"password",name:"password",required:!0}),r.a.createElement("label",null,"Contrase\xf1a")),r.a.createElement("button",{onClick:function(){return window.location.replace(!1)},className:"btn btn-primary centrado-h submit",type:"submit"},"Registrarse"),r.a.createElement("button",{onClick:function(){return window.location.href="/auth/google"},className:"btn btn-light centrado-h google"},r.a.createElement(E.a,null)," Ingresa con Google")),r.a.createElement("div",{className:"text-light"},"\xbfYa tienes una cuenta?",r.a.createElement("button",{className:"btn btn-link btn-secondary",onClick:function(){return l(!0)}},"Ingresa"))))},b=t(18),v=t(36),f=t(13),N=function(e){var a=Object(u.useToasts)().addToast,t=Object(n.useState)([]),l=Object(m.a)(t,2),c=l[0],s=l[1],i=Object(n.useState)([]),o=Object(m.a)(i,2),d=o[0],p=o[1],E=Object(n.useState)([]),h=Object(m.a)(E,2),N=h[0],g=h[1],y=Object(n.useState)(0),w=Object(m.a)(y,2),j=w[0],O=w[1],x=Object(n.useState)({}),k=Object(m.a)(x,2),C=k[0],A=k[1],T=Object(n.useState)([{title:"Salud",codigos:[1,2,3],subareas:["Espiritual","Fisica","Alimentacion"]},{title:"Relaciones",codigos:[4,5,6],subareas:["Yo","Nosotros","Familia"]},{title:"Trabajo",codigos:[7,8,9],subareas:["Aprendizaje","Proyectos Alternos","Trabajo Principal"]}]),S=Object(m.a)(T,2),D=S[0],F=(S[1],function(a){var t=new Date,n="".concat(t.getDate(),"-").concat(t.getMonth()+1,"-").concat(t.getFullYear()),r=e.records.filter((function(e){return e.date==n})),l=a||Object(b.a)({},C),c=Object.keys(l);console.log(r,c),r.map((function(e){c.includes(e.habitTitle)&&(l[e.habitTitle]=e.value)})),A(l)});Object(n.useEffect)((function(){var a={},t=function(e,a){return e.inputType===a.inputType?0:e.inputType>a.inputType?1:-1},n=0,r=e.habits.filter((function(a){return a.isDaily&&a.subarea===D[e.area].codigos[0]})).sort(t);n+=0===r.length?0:1,r.forEach((function(e){if(void 0===a[e.title]){var t;switch(e.inputType){case"number":t=0;break;case"time":t="";break;case"checkbox":t=!1;break;default:t=""}a[e.title]=t}})),s(r),n+=0===(r=e.habits.filter((function(a){return a.isDaily&&a.subarea===D[e.area].codigos[1]})).sort(t)).length?0:1,r.forEach((function(e){if(void 0===a[e.title]){var t;switch(e.inputType){case"number":t=0;break;case"time":t="";break;case"checkbox":t=!1;break;default:t=""}a[e.title]=t}})),p(r),n+=0===(r=e.habits.filter((function(a){return a.isDaily&&a.subarea===D[e.area].codigos[2]})).sort(t)).length?0:1,r.forEach((function(e){if(void 0===a[e.title]){var t;switch(e.inputType){case"number":t=0;break;case"time":t="";break;case"checkbox":t=!1;break;default:t=""}a[e.title]=t}})),g(r),O(n),A(a),F(a)}),[D,e.area,e.habits]),Object(n.useEffect)(F,[e.records]);var B=function(e,a){var t=Object(b.a)({},C);switch(e.type){case"number":t[a]=parseInt(e.value);break;case"checkbox":t[a]=!t[a];break;default:t[a]=e.value}console.log("set input",e,t),A(t)},L=function(a){var t=new Date,n={date:"".concat(t.getDate(),"-").concat(t.getMonth()+1,"-").concat(t.getFullYear()),userEmail:e.user.email,habitTitle:a,value:C[a]};console.log(C),fetch("/records",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})},M=function(t,n){if(n.length>0){var l,c=3===j&&3!==t?6:12,s=[];return 12===c&&(l=n.filter((function(e,a){return a%2===0})),s=n.filter((function(e,a){return a%2===1}))),r.a.createElement("div",{className:"col-".concat(c," subarea")},r.a.createElement("div",{className:"header"},r.a.createElement("h3",{className:"text centrado-v"},D[e.area].subareas[t-1])),r.a.createElement("div",{className:"row"},12===c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-6 pr"},l.map((function(e,t){return r.a.createElement("div",{className:"habitItem",key:"1-".concat(t)},r.a.createElement("span",{className:"centrado-v d-block"},e.title),r.a.createElement("div",{className:"input centrado-v"},r.a.createElement("input",{defaultChecked:C[e.title],value:C[e.title],onBlur:function(){L(e.title),a("Registro Guardado",{appearance:"success"})},onChange:function(a){return B(a.target,e.title)},className:"centrado-h",type:e.inputType})))}))),r.a.createElement("div",{className:"col-6 pl"},s.map((function(e,t){return r.a.createElement("div",{className:"habitItem",key:"2-".concat(t)},r.a.createElement("span",{className:"centrado-v d-block"},e.title),r.a.createElement("div",{className:"input centrado-v"},r.a.createElement("input",{defaultChecked:C[e.title],value:C[e.title],onBlur:function(){L(e.title),a("Registro Guardado",{appearance:"success"})},onChange:function(a){return B(a.target,e.title)},className:"centrado-h",type:e.inputType})))})))):r.a.createElement("div",{className:"col-12 "},n.map((function(e,t){return r.a.createElement("div",{className:"habitItem",key:t},r.a.createElement("span",{className:"centrado-v d-block"},e.title),r.a.createElement("div",{className:"input centrado-v"},r.a.createElement("input",{defaultChecked:C[e.title],value:C[e.title],onBlur:function(){L(e.title),a("Registro Guardado",{appearance:"success"})},onChange:function(a){return B(a.target,e.title)},className:"centrado-h",type:e.inputType})))})))))}return""};return r.a.createElement("div",{className:" DiaryCard card"},r.a.createElement("div",{className:"card-header ".concat(0===e.area?"":"collapsed"),"data-toggle":"collapse","data-target":"#collapse".concat(e.area),"aria-expanded":"true","aria-controls":"collapse".concat(e.area),tabIndex:0},r.a.createElement("h2",{className:"centrado-v title"},D[e.area].title),r.a.createElement("div",{className:"centrado-v collapse-icon closed "},r.a.createElement(v.a,null)),r.a.createElement("div",{className:"centrado-v collapse-icon open "},r.a.createElement(v.b,null))),r.a.createElement("div",{id:"collapse".concat(e.area),className:"collapse ".concat(0===e.area?"show":""),"aria-labelledby":"heading".concat(e.area),"data-parent":"#DiaryAreas"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row subareas no-gutters"},0===c.length&&0===d.length&&0===N.length?r.a.createElement("div",{className:"col empty"},r.a.createElement("div",{className:"empty-icon centrado-h fit"},r.a.createElement(f.a,null)),r.a.createElement("h3",{className:"empty-text"},"Parece que no has creado ningun habito en esta categoria, crea uno nuevo en tu perfil. ")):r.a.createElement(r.a.Fragment,null,M(1,c),M(2,d),M(3,N))))))},g=t(15),y=t(47),w=t.n(y),j=t(48),O=t.n(j),x=function(e){var a=Object(n.useRef)(),t=Object(n.useState)({width:0,height:0}),l=Object(m.a)(t,2),c=l[0],s=l[1],i=Object(n.useState)(0),o=Object(m.a)(i,2),u=o[0],d=o[1];Object(n.useEffect)((function(){if(a.current&&(s({width:a.current.offsetWidth,height:50}),console.log(e.completed,e.total),void 0!==e.completed&&void 0!==e.total)){var t=e.completed/e.total;d(t.toFixed(2))}}),[e.completed,e.total]),g.a(".progressCuy").html(""),g.a(".progressNumber").html("");var p=g.a(".progressCuy").append("svg").attr("height",c.height).attr("width",c.width).attr("y",20);p.append("rect").attr("class","bg-rect").attr("rx",10).attr("ry",10).attr("fill","#62bbc5").attr("height",15).attr("width",c.width-50).attr("x",0).attr("y",20);var E=p.append("rect").attr("class","progress-rect").attr("fill","#0e4b6e").attr("height",15).attr("width",0).attr("rx",10).attr("ry",10).attr("x",0).attr("y",20),h=p.append("image").attr("xlink:href",w.a).attr("width",30);E.transition().duration(1e3).attr("width",u*c.width-50),h.transition().duration(1e3).attr("x",u*c.width-75);p.append("image").attr("xlink:href",O.a).attr("width",30).attr("x",c.width-60).attr("y",0);var b=g.a(".progressNumber").append("svg").attr("height",100).attr("width",100);return b.append("circle").attr("fill","#0e4b6e").attr("cx",50).attr("cy",50).attr("r",50).attr("height",100).attr("width",100),b.append("text").attr("x",20).attr("y",55).attr("font-size",20).attr("fill","#FFF").text(e.completed+"/"+e.total),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"progressCuy",ref:a},"Progress"),r.a.createElement("h5",null,r.a.createElement("strong",null,"Progreso:",100*u,"%")))};var k=function(e){var a=Object(n.useState)(0),t=Object(m.a)(a,2),l=(t[0],t[1],Object(n.useState)(0)),c=Object(m.a)(l,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){var a=new Date,t="".concat(a.getDate(),"-").concat(a.getMonth()+1,"-").concat(a.getFullYear()),n=e.records.filter((function(e){return e.date==t}));console.log(n),i(n.length)}),[e.records]),r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-12 diary"},r.a.createElement("h1",{className:"titulo-seccion"},"Registro tus logros diarios"),r.a.createElement("div",{className:"accordion",id:"DiaryAreas"},r.a.createElement(N,{area:0,user:e.user,habits:e.habits,records:e.records}),r.a.createElement(N,{area:1,user:e.user,habits:e.habits,records:e.records}),r.a.createElement(N,{area:2,user:e.user,habits:e.habits,records:e.records}))),r.a.createElement("div",{className:"col-md-6 col-12"},r.a.createElement("div",null,r.a.createElement("h1",{style:{color:"#0e4b6e"}},"Tu progreso el d\xeda de hoy"),r.a.createElement("h2",{style:{margin:"40px 0 20px 0",color:"#FFF",background:"#0e4b6e",padding:"5px"}},"Cumplimiento porcentual de tus h\xe1bitos"),r.a.createElement(x,{completed:s,total:e.habits.length}),r.a.createElement("p",{style:{margin:"20px 0 0 0",fontSize:"18px"}},"Has completado ",r.a.createElement("strong",null,s)," h\xe1bitos de tus ",r.a.createElement("strong",null,e.habits.length)," h\xe1bitos registrados el d\xeda de hoy.")))))},C=t(23),A=t.n(C),T=t(49);var S=function(e){var a=Object(n.useState)(!1),t=Object(m.a)(a,2),l=t[0],c=t[1];return r.a.createElement("div",{className:"Profile"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-5 col-12 profile"},r.a.createElement("div",{className:"card profile-info"},r.a.createElement("div",{className:"photo centrado-h"},r.a.createElement("img",{alt:"foto de perfil",src:e.user.photo?e.user.photo:A.a})),r.a.createElement("h3",{className:"name"},e.user.name),r.a.createElement("h4",{className:"email"},e.user.email),r.a.createElement("hr",null),r.a.createElement("div",{className:" row stats"},r.a.createElement("div",{className:"stat col"},r.a.createElement("h6",{className:"title centrado-h"},"Habitos"),r.a.createElement("p",{className:"value"},"".concat(e.habits.length>9?"":"0").concat(e.habits.length))),r.a.createElement("div",{className:"stat col"},r.a.createElement("h6",{className:"title centrado-h"},"Supervisores"),r.a.createElement("p",{className:"value"},"".concat(e.user.supervisors.length>9?"":"0").concat(e.user.supervisors.length))),r.a.createElement("div",{className:"stat col"},r.a.createElement("h6",{className:"title centrado-h"},"Pupilos"),r.a.createElement("p",{className:"value"},"".concat(e.user.pupils.length>9?"":"0").concat(e.user.pupils.length)))))),r.a.createElement("div",{className:"col-lg-8 col-md-7 col-12 board"},r.a.createElement("div",{className:"row supervisors"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",{className:"title fit"},"Mis Supervisores"),r.a.createElement("button",{className:"add centrado-v",onClick:function(){c(!0)}},r.a.createElement(T.a,null))),r.a.createElement("div",{className:"body"},r.a.createElement("hr",null),r.a.createElement("div",{className:"row habits-list no-gutters ".concat(l?"d-none":"")},e.user.supervisors.length>0?e.user.supervisors.map((function(e,a){return r.a.createElement("div",{className:"col-6 habit",key:"profile-supervisor-".concat(a)},r.a.createElement("div",{className:"habit-item"},r.a.createElement("span",{className:"centrado-v title"},e)))})):r.a.createElement("div",{className:"col empty"},r.a.createElement("div",{className:"empty-icon centrado-h fit"},r.a.createElement(f.a,null)),r.a.createElement("h4",{className:"empty-text"},"Parece que no has registrado ningun supervisor. ")))))),r.a.createElement("div",{className:"row pupils"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",{className:"title fit"},"Mis Pupilos")),r.a.createElement("div",{className:"body"},r.a.createElement("hr",null),r.a.createElement("div",{className:"row habits-list no-gutters "},e.user.pupils.length>0?e.user.pupils.map((function(a,t){return r.a.createElement("div",{className:"col-12 pupil",key:"profile-pupil-".concat(t)},r.a.createElement("span",{className:" title"},r.a.createElement("strong",null,a)),r.a.createElement(x,{completed:e.pupils[a].records.length,total:e.pupils[a].habits.length}),r.a.createElement("hr",null))})):r.a.createElement("div",{className:"col empty"},r.a.createElement("div",{className:"empty-icon centrado-h fit"},r.a.createElement(f.a,null)),r.a.createElement("h4",{className:"empty-text"},"Parece que nadie te ha registrado como supervisor. "))))))))))},D=t(50),F=t.n(D),B=t(51),L=t.n(B),M=t(52),Y=t.n(M),q=t(9),P=t(24),R=t.n(P),z=function(e){var a,t;return Object(n.useEffect)((function(){var n,r=e.data;r.length>0&&((n=r.filter((function(a){if(a.habitTitle==e.habit&&a.date>new Date(Date.now()-7))return a}))).sort((function(e,a){var t=new Date(e.date),n=new Date(a.date);return t<n?-1:t>n?1:0})),a={chart:{id:"Dates"},xaxis:{categories:n.map((function(e){return e.date}))}},t=[{name:"Number",data:n.map((function(e){return e.value}))}])}),[]),r.a.createElement("div",{className:"w-100 h-75 position-absolute bottom-0 "},void 0!=t&&void 0!=a?r.a.createElement(R.a,{options:a,series:t,type:"line",width:"80%",height:"100%"}):"Cargando...")},I=function(e){var a=e.data;a.sort((function(e,a){var t=new Date(e.date),n=new Date(a.date);return t<n?-1:t>n?1:0}));var t={chart:{id:"Dates"},xaxis:{categories:a.map((function(e){return e.date}))}},n=[{name:"Hour",data:a.map((function(e){return e.value}))}];return r.a.createElement("div",{className:"w-100 h-75 position-absolute bottom-0 "},r.a.createElement(R.a,{options:t,series:n,type:"line",width:"80%",height:"100%"}))},J=(t(80),function(e){var a=[r.a.createElement(q.g,null),r.a.createElement(q.i,null),r.a.createElement(q.a,null),r.a.createElement(q.b,null),r.a.createElement(q.f,null),r.a.createElement(q.h,null),r.a.createElement(q.e,null),r.a.createElement(q.d,null),r.a.createElement(q.c,null)],t=Object(n.useState)([{title:"Salud",codigos:[1,2,3],color:"tertiary",subareas:["Espiritual","Fisica","Alimentacion"]},{title:"Relaciones",codigos:[4,5,6],color:"primary",subareas:["Yo","Nosotros","Familia"]},{title:"Trabajo",codigos:[7,8,9],color:"quaternary",subareas:["Aprendizaje","Proyectos","Principal"]}]),l=Object(m.a)(t,2),c=l[0],s=(l[1],Object(n.useState)(!1)),i=Object(m.a)(s,2),o=i[0],u=i[1],d=Object(n.useState)(null),p=Object(m.a)(d,2),E=p[0],h=p[1],v={title:"",description:"",isDaily:!0,userEmail:e.user.email,inputType:"number",goalValue:"",unit:"",subarea:1},N=function(e,a){var t=Object(b.a)({},E);t[a]=e,h(t)},g=function(t){var n=e.habits.filter((function(e){return c[t].codigos.includes(e.subarea)})).sort((function(e,a){return e.subarea-a.subarea}));return r.a.createElement("div",{className:"card centrado-v "+c[t].color},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"m-0"},c[t].title)),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row  no-gutters "},n.length>0?n.map((function(e,t){return r.a.createElement("div",{className:"col-6 habit",key:"habit-".concat(t)},r.a.createElement("div",{className:"habit-item ".concat(e===E?"active":""),tabIndex:0,onClick:function(){h(e)}},r.a.createElement("span",{className:"title"},e.title),r.a.createElement("div",{className:"icon fit centrado-v"},a[e.subarea-1])))})):r.a.createElement("div",{className:"col empty"},r.a.createElement("div",{className:"empty-icon centrado-h fit"},r.a.createElement(f.a,null)),r.a.createElement("h4",{className:"empty-text"},"Parece que no has creado ningun habito en esta categoria. ")))))};return r.a.createElement("div",{className:"Habit"},r.a.createElement("div",{className:"row contain"},r.a.createElement("div",{className:"col-md-7 col-12 areas"},r.a.createElement("div",{className:"row new"},r.a.createElement("button",{className:"btn btn-secondary mx-2 float-right",onClick:function(){h(v),u(!0)}},"Crear Nuevo Habito")),r.a.createElement("div",{className:"row area"},r.a.createElement("div",{className:"col-7 habits-list"},g(0)),r.a.createElement("div",{className:"col-5 cuy-img"},r.a.createElement("img",{className:"centrado",alt:"",src:F.a}))),r.a.createElement("div",{className:"row area"},r.a.createElement("div",{className:"col-5 cuy-img"},r.a.createElement("img",{className:"centrado",alt:"",src:L.a})),r.a.createElement("div",{className:"col-7 habits-list"},g(1))),r.a.createElement("div",{className:"row area"},r.a.createElement("div",{className:"col-7 habits-list"},g(2)),r.a.createElement("div",{className:"col-5 cuy-img"},r.a.createElement("img",{className:"centrado",alt:"",src:Y.a})))),r.a.createElement("div",{className:"col-md-5 col-12 info"},E?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row details"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"m-0"},o?"Nuevo Habito":"Detalles")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:"edit"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 "},r.a.createElement("div",{className:"inputBox"},r.a.createElement("input",{type:"text",name:"title",required:!0,value:E.title,onChange:function(e){return N(e.target.value,"title")}}),r.a.createElement("label",null,"Nombre Corto"))),r.a.createElement("div",{className:"col-6 "},r.a.createElement("div",{className:"checkbox"},r.a.createElement("label",null,"Registro Diario"),r.a.createElement("input",{className:"centrado-h",type:"checkbox",name:"isDaily",checked:E.isDaily,onChange:function(e){return N(!E.isDaily,"isDaily")}}))),r.a.createElement("div",{className:"col-12 "},r.a.createElement("div",{className:"inputBox"},r.a.createElement("input",{type:"text",name:"description",required:!0,value:E.description,onChange:function(e){return N(e.target.value,"description")}}),r.a.createElement("label",null,"Descripcion Habito"))),r.a.createElement("div",{className:"col-4 "},r.a.createElement("div",{className:"inputBox"},r.a.createElement("label",{className:"no-animate"},"Tipo de Registro"),r.a.createElement("select",{name:"inputType",required:!0,value:E.inputType,onChange:function(e){N("","goalValue"),N(e.target.value,"inputType")}},r.a.createElement("option",{value:"number"},"Numerico"),r.a.createElement("option",{value:"checkbox"},"Si/No(completado)"),r.a.createElement("option",{value:"time"},"Hora")))),"checkbox"!==E.inputType?r.a.createElement("div",{className:"col-4 "},r.a.createElement("div",{className:"inputBox"},r.a.createElement("input",{type:E.inputType,name:"goalValue",required:!0,value:E.goalValue,onChange:function(e){return N("number"===E.inputType?parseInt(e.target.value):e.target.value,"goalValue")}}),r.a.createElement("label",{className:"time"===E.inputType?"no-animate":""},"Objetivo"))):"","number"===E.inputType?r.a.createElement("div",{className:"col-4 "},r.a.createElement("div",{className:"inputBox"},r.a.createElement("input",{type:"text",name:"unit",required:!0,value:E.unit,onChange:function(e){return N(e.target.value,"unit")}}),r.a.createElement("label",null,"Unidad(ej.vasos)"))):"",r.a.createElement("div",{className:"col-12 mb-3"},r.a.createElement("h4",null,"Selecciona un area"),r.a.createElement("div",{className:"select-area row"},c.map((function(e){return r.a.createElement("div",{className:"col area-container "+e.color,key:"area-"+e.title},r.a.createElement("label",{className:"area-title centrado-h"},e.title),r.a.createElement("div",{className:"circle centrado-h"},e.subareas.map((function(t,n){return r.a.createElement("div",{className:"sub-area ".concat(E.subarea===e.codigos[n]?"active":""),key:"subarea-"+t,onClick:function(){return N(e.codigos[n],"subarea")}},r.a.createElement("span",null,t),r.a.createElement("div",{className:"icon fit"},a[e.codigos[n]-1]))}))))})))),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-primary mx-2 float-right",onClick:function(){console.log(E),fetch("/habits",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}).then((function(){o&&(N(null),u(!1))}))}},"Guardar"),o&&r.a.createElement("button",{className:"btn btn-medium mx-2 float-right",onClick:function(){h(null),u(!1)}},"Cancelar"))))))),r.a.createElement("div",{className:"row graph"},"number"==E.inputType?r.a.createElement(z,{data:e.records,habit:E.title}):"time"==E.inputType?r.a.createElement(I,{data:e.records,habit:E.title}):"")):r.a.createElement("h3",null,"Selecciona algun habito para ver la informacion"))))}),V=t(25),U=t.n(V);var H=function(e){var a=Object(n.useState)(Object(p.g)().pathname),t=Object(m.a)(a,1)[0];return r.a.createElement(r.a.Fragment,null,e.user.nuevo?"":r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"Base"},r.a.createElement("a",{className:"logo",href:"/"},r.a.createElement("img",{className:"centrado-v",alt:"Logo iCUY",src:U.a})),r.a.createElement("div",{className:"links centrado-v"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link ".concat("/platform"===t?"active":""),href:"/platform"},"Inicio")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link ".concat("/platform/profile"===t?"active":""),href:"/platform/profile"},"Perfil")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link ".concat("/platform/habits"===t?"active":""),href:"/platform/habits"},"Mis Habitos")))),r.a.createElement("ul",{className:"navbar-nav profile centrado-v"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("img",{className:"profile dropdown-toggle",alt:"mini profile",src:e.user.photo?e.user.photo:A.a,role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"profileMenu"},r.a.createElement("a",{className:"dropdown-item",href:"/platform/profile"},"Mi Perfil"),r.a.createElement("a",{className:"dropdown-item",onClick:function(){return fetch("/auth/logout")},href:"/login"},"Cerrar Sesion"))))),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/platform/profile"},r.a.createElement(S,{user:e.user,habits:e.habits,pupils:e.pupils})),r.a.createElement(p.b,{path:"/platform/habits"},r.a.createElement(J,{user:e.user,habits:e.habits,records:e.records})),r.a.createElement(p.b,{path:"/platform/*"},r.a.createElement(p.a,{to:"/platform"})),r.a.createElement(p.b,{path:"/platform"},r.a.createElement(k,{user:e.user,habits:e.habits,records:e.records})))))},Q=t(55),K=t.n(Q);var G=function(){return r.a.createElement("div",{className:"LandPage"},r.a.createElement("nav",null,r.a.createElement("a",{className:"logo",href:"/"},r.a.createElement("img",{className:"centrado-v",alt:"Logo iCUY",src:U.a})),r.a.createElement(d.b,{to:"/login"},r.a.createElement("button",{className:"btn btn-outline btn-primary main-btn centrado-v",href:"/login"},"Ingresa"))),r.a.createElement("div",{className:"intro"},r.a.createElement("div",{className:"cover"}),r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-4"},r.a.createElement("img",{className:"centrado-v intro-img",alt:"Mascota iCUY",src:K.a})),r.a.createElement("div",{className:"col-md-8 col-12"},r.a.createElement("div",{className:"intro-text centrado"},r.a.createElement("h2",{className:"title"},"Transforma tu Vida"),r.a.createElement("p",null,"Organiza y guia tu vida para ser la mejor version de ti mismo"),r.a.createElement("h3",null,"Haz de la felicidad tu habito"),r.a.createElement(d.b,{to:"/login"},r.a.createElement("button",{className:"btn btn-primary inicio",href:"/login"},"Empieza Ya")))))),r.a.createElement("div",{className:"second"},r.a.createElement("h1",{className:"centrado-h title"},"Para que iCUY"),r.a.createElement("p",{className:"subtitle"},"Crea habitos en Salud, Relaciones y Trabajo para ayudarte a vivir una vida mas sana, feliz y satisfactoria."),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Facil de Usar")),r.a.createElement("div",{className:"description"},"El ciudadoso dise\xf1o de la plataforma permite a cualquier usuario usarla de la manera que desee.")),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"It's free")),r.a.createElement("div",{className:"description"},"El unico proposito de esta plataforma es ayudar a cualquier persona a mejorar sus vidas, por este motivo es libre de pago.")),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Avalado por John")),r.a.createElement("div",{className:"description"},"John Guerra desarrollador y mentor aprueba esta aplicaci\xf3n (#Aprobado).")))),r.a.createElement("div",{className:"third"},r.a.createElement("h1",{className:"title"},"Metodolog\xeda Feliz"),r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"number"},r.a.createElement("div",{className:"centrado fit num"},"1")),r.a.createElement("h2",{className:"header"},"Define Tus Habitos"),r.a.createElement("p",{className:"description"},"Puedes crear todos los habitos que creas mejoraran tu vida",r.a.createElement("br",null),"Salud | Relaciones | Trabajo")),r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"number"},r.a.createElement("div",{className:"centrado fit num"},"2")),r.a.createElement("h2",{className:"header"},"Registra tus Logros"),r.a.createElement("p",{className:"description"},"A\xf1ade registros de tu progreso cada ves que puedas.")),r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"number"},r.a.createElement("div",{className:"centrado fit num"},"3")),r.a.createElement("h2",{className:"header"},"Dale Seguimiento a Tu Progreso"),r.a.createElement("p",{className:"description"},"Puedes usar el Panel visual para observar tu avance en los habitos que te has propuesto"))),r.a.createElement("div",{className:"fourth"},r.a.createElement("h1",{className:"title centrado-v"},"Listo para Mejorar"),r.a.createElement(d.b,{to:"/login"},r.a.createElement("button",{className:"btn btn-primary inicio centrado-v",href:"/login"},"Empieza Ya"))))};var X=function(){var e=Object(n.useState)(null),a=Object(m.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(!0),s=Object(m.a)(c,2),E=s[0],b=s[1],v=Object(n.useState)([]),f=Object(m.a)(v,2),N=f[0],g=f[1],y=Object(n.useState)([]),w=Object(m.a)(y,2),j=w[0],O=w[1],x=Object(n.useState)({}),k=Object(m.a)(x,2),C=k[0],A=k[1],T=Object(n.useState)(null),S=Object(m.a)(T,2),D=S[0],F=S[1];return Object(n.useEffect)((function(){fetch("/auth/user").then((function(e){return e.json()})).then(function(){var e=Object(o.a)(i.a.mark((function e(a){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(a),a&&((t=new WebSocket(window.location.origin.replace(/^http/,"ws"))).onopen=function(){F(t)},fetch("/habits/filter?userEmail=".concat(a.email)).then((function(e){return e.json()})).then((function(e){g(e)})),fetch("/records/filter?userEmail=".concat(a.email)).then((function(e){return e.json()})).then((function(e){O(e)})),a.pupils&&(n={},r=[],a.pupils.map((function(e){n[e]={},console.log("pup",n),r.push(fetch("/habits/filter?userEmail=".concat(e)).then((function(e){return e.json()})).then((function(a){n[e].habits=a}))),r.push(fetch("/records/filter?userEmail=".concat(e)).then((function(e){return e.json()})).then((function(a){var t=new Date,r="".concat(t.getDate(),"-").concat(t.getMonth()+1,"-").concat(t.getFullYear()),l=a.filter((function(e){return e.date==r}));n[e].records=l})))})),Promise.all(r).then((function(){A(n)})))),b(!1);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){console.log("in socket",C),D&&(D.onmessage=function(e){var a=JSON.parse(e.data);if("delete"==a.operationType)switch(a.ns.coll){case"users":a.documentKey._id==t._id&&window.location.reload();break;case"habits":var n=N.filter((function(e){return e._id!=a.documentKey._id}));n.length<N.length&&g(n);break;case"records":var r=j.filter((function(e){return e._id!=a.documentKey._id}));r.length<j.length&&O(r)}else if(a.fullDocument.email==t.email||a.fullDocument.userEmail==t.email)switch(a.ns.coll){case"users":l(a.fullDocument);break;case"habits":var c=N.filter((function(e){return e._id!=a.documentKey._id}));c.push(a.fullDocument),g(c);break;case"records":var s=j.filter((function(e){return e._id!=a.documentKey._id}));s.push(a.fullDocument),O(s)}})}),[t,N,j,C,D]),E?"":r.a.createElement(u.ToastProvider,{autoDismiss:!0,placement:"top-center"},r.a.createElement(d.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/platform"},t?r.a.createElement(H,{user:t,habits:N,records:j,pupils:C}):r.a.createElement(p.a,{to:"/login"})),r.a.createElement(p.b,{path:"/login"},t?r.a.createElement(p.a,{to:"/platform"}):r.a.createElement(h,null)),r.a.createElement(p.b,{path:"/"},r.a.createElement(G,null)))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.ac9e2f26.chunk.js.map